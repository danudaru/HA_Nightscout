# Nightscout Extended Dashboard - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º –≤ –Ω–æ–≤—ã–π Dashboard (YAML —Ä–µ–∂–∏–º)

title: Nightscout Extended
views:
  # ============================================================================
  # –í–ö–õ–ê–î–ö–ê 1: –û–ë–ó–û–† (–ì–ª–∞–≤–Ω–∞—è)
  # ============================================================================
  - title: –û–±–∑–æ—Ä
    path: nightscout-overview
    icon: mdi:heart-pulse
    cards:
      - type: entities
        title: –¢–µ–∫—É—â–∞—è –≥–ª—é–∫–æ–∑–∞
        entities:
          - entity: sensor.blood_glucose
            name: –ì–ª—é–∫–æ–∑–∞
            icon: mdi:water
          - type: attribute
            entity: sensor.blood_glucose
            attribute: delta
            name: –î–µ–ª—å—Ç–∞
          - type: attribute
            entity: sensor.blood_glucose
            attribute: direction
            name: –¢—Ä–µ–Ω–¥
          - type: attribute
            entity: sensor.blood_glucose
            attribute: last_update
            name: –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

      - type: entities
        title: –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
        entities:
          - entity: sensor.nightscout_ea1c_90d
            name: –ì–ª–∏–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–º–æ–≥–ª–æ–±–∏–Ω (3 –º–µ—Å)
            icon: mdi:chart-line
          - type: divider
          - entity: sensor.nightscout_insulin_on_board
            name: –ê–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω (IOB)
          - entity: sensor.nightscout_carbs_on_board
            name: –ê–∫—Ç–∏–≤–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã (COB)
          - type: divider
          - entity: sensor.nightscout_pump_reservoir
            name: –ò–Ω—Å—É–ª–∏–Ω –≤ –ø–æ–º–ø–µ
          - entity: sensor.nightscout_pump_battery
            name: –ó–∞—Ä—è–¥ –ø–æ–º–ø—ã
          - entity: sensor.nightscout_phone_battery
            name: –ó–∞—Ä—è–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

      - type: horizontal-stack
        cards:
          - type: entities
            title: Time in Range (24—á)
            state_color: true
            entities:
              - entity: sensor.nightscout_tir_24h
                name: –í —Ü–µ–ª–µ–≤–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
                icon: mdi:target
              - entity: sensor.nightscout_tbr_24h
                name: –ù–∏–∂–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-down-bold
              - entity: sensor.nightscout_tar_24h
                name: –í—ã—à–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-up-bold

  # ============================================================================
  # –í–ö–õ–ê–î–ö–ê 2: –ü–û–î–†–û–ë–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ò –ì–†–ê–§–ò–ö–ò
  # ============================================================================
  - title: –ì—Ä–∞—Ñ–∏–∫–∏
    path: nightscout-graphs
    icon: mdi:chart-line
    cards:
      - type: history-graph
        title: –ì–ª—é–∫–æ–∑–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 8 —á–∞—Å–æ–≤
        hours_to_show: 8
        entities:
          - entity: sensor.blood_glucose
            name: –ì–ª—é–∫–æ–∑–∞

      - type: history-graph
        title: IOB / COB / Sensitivity
        hours_to_show: 8
        entities:
          - entity: sensor.nightscout_insulin_on_board
            name: IOB
          - entity: sensor.nightscout_carbs_on_board
            name: COB
          - entity: sensor.nightscout_sensitivity_ratio
            name: Sensitivity

      - type: history-graph
        title: –ë–∞–∑–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
        hours_to_show: 8
        entities:
          - entity: sensor.nightscout_basal_rate
            name: Basal Rate
          - entity: sensor.nightscout_temp_basal
            name: Temp Basal

      - type: entities
        title: –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
        entities:
          - entity: sensor.nightscout_last_treatment
            name: –ü–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ
          - entity: sensor.nightscout_last_bolus
            name: –ü–æ—Å–ª–µ–¥–Ω–∏–π –±–æ–ª—é—Å
          - entity: sensor.nightscout_last_carbs
            name: –ü–æ—Å–ª–µ–¥–Ω–∏–µ —É–≥–ª–µ–≤–æ–¥—ã

  # ============================================================================
  # –í–ö–õ–ê–î–ö–ê 3: –°–¢–ê–¢–ò–°–¢–ò–ö–ê
  # ============================================================================
  - title: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    path: nightscout-statistics
    icon: mdi:chart-box
    cards:
      - type: custom:expander-card
        title: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 24 —á–∞—Å–∞
        expanded: true
        clear: true
        cards:
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.mean_bg_24h
                name: –°—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞
                icon: mdi:format-align-center
              - type: entity
                entity: sensor.median_bg_24h
                name: –ú–µ–¥–∏–∞–Ω–Ω–∞—è –≥–ª—é–∫–æ–∑–∞
                icon: mdi:chart-timeline-variant
              - type: entity
                entity: sensor.nightscout_ea1c_24h
                name: eA1c
                icon: mdi:percent
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.stdev_24h
                name: –°—Ç–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
                icon: mdi:chart-bell-curve
              - type: entity
                entity: sensor.cv_24h
                name: –ö–æ—ç—Ñ—Ñ. –≤–∞—Ä–∏–∞—Ü–∏–∏
                icon: mdi:percent
              - type: entity
                entity: sensor.gvi_24h
                name: GVI
                icon: mdi:chart-scatter-plot
          - type: entities
            title: Time in Range (24—á)
            state_color: true
            entities:
              - entity: sensor.nightscout_tir_24h
                name: –í —Ü–µ–ª–µ–≤–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
                icon: mdi:target
              - entity: sensor.nightscout_tbr_24h
                name: –ù–∏–∂–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-down-bold
              - entity: sensor.nightscout_tar_24h
                name: –í—ã—à–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-up-bold

      - type: custom:expander-card
        title: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 7 –¥–Ω–µ–π
        expanded: false
        clear: true
        cards:
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.mean_bg_7d
                name: –°—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞
              - type: entity
                entity: sensor.median_bg_7d
                name: –ú–µ–¥–∏–∞–Ω–Ω–∞—è –≥–ª—é–∫–æ–∑–∞
              - type: entity
                entity: sensor.nightscout_ea1c_7d
                name: eA1c
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.stdev_7d
                name: –°—Ç–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
              - type: entity
                entity: sensor.cv_7d
                name: –ö–æ—ç—Ñ—Ñ. –≤–∞—Ä–∏–∞—Ü–∏–∏
              - type: entity
                entity: sensor.gvi_7d
                name: GVI
          - type: entities
            title: Time in Range (7–¥)
            state_color: true
            entities:
              - entity: sensor.nightscout_tir_7d
                name: –í —Ü–µ–ª–µ–≤–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
                icon: mdi:target
              - entity: sensor.nightscout_tbr_7d
                name: –ù–∏–∂–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-down-bold
              - entity: sensor.nightscout_tar_7d
                name: –í—ã—à–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-up-bold

      - type: custom:expander-card
        title: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 30 –¥–Ω–µ–π
        expanded: false
        clear: true
        cards:
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.mean_bg_30d
                name: –°—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞
              - type: entity
                entity: sensor.median_bg_30d
                name: –ú–µ–¥–∏–∞–Ω–Ω–∞—è –≥–ª—é–∫–æ–∑–∞
              - type: entity
                entity: sensor.nightscout_ea1c_30d
                name: eA1c
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.stdev_30d
                name: –°—Ç–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
              - type: entity
                entity: sensor.cv_30d
                name: –ö–æ—ç—Ñ—Ñ. –≤–∞—Ä–∏–∞—Ü–∏–∏
              - type: entity
                entity: sensor.gvi_30d
                name: GVI
          - type: entities
            title: Time in Range (30–¥)
            state_color: true
            entities:
              - entity: sensor.nightscout_tir_30d
                name: –í —Ü–µ–ª–µ–≤–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
                icon: mdi:target
              - entity: sensor.nightscout_tbr_30d
                name: –ù–∏–∂–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-down-bold
              - entity: sensor.nightscout_tar_30d
                name: –í—ã—à–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-up-bold

      - type: custom:expander-card
        title: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 90 –¥–Ω–µ–π (3 –º–µ—Å—è—Ü–∞)
        expanded: false
        clear: true
        cards:
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.mean_bg_90d
                name: –°—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞
              - type: entity
                entity: sensor.median_bg_90d
                name: –ú–µ–¥–∏–∞–Ω–Ω–∞—è –≥–ª—é–∫–æ–∑–∞
              - type: entity
                entity: sensor.nightscout_ea1c_90d
                name: eA1c
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.stdev_90d
                name: –°—Ç–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
              - type: entity
                entity: sensor.cv_90d
                name: –ö–æ—ç—Ñ—Ñ. –≤–∞—Ä–∏–∞—Ü–∏–∏
              - type: entity
                entity: sensor.gvi_90d
                name: GVI
          - type: entities
            title: Time in Range (90–¥)
            state_color: true
            entities:
              - entity: sensor.nightscout_tir_90d
                name: –í —Ü–µ–ª–µ–≤–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
                icon: mdi:target
              - entity: sensor.nightscout_tbr_90d
                name: –ù–∏–∂–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-down-bold
              - entity: sensor.nightscout_tar_90d
                name: –í—ã—à–µ —Ü–µ–ª–µ–≤–æ–≥–æ
                icon: mdi:arrow-up-bold

  # ============================================================================
  # –í–ö–õ–ê–î–ö–ê 4: –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ò –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´
  # ============================================================================
  - title: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
    path: nightscout-diagnostics
    icon: mdi:stethoscope
    cards:
      - type: entities
        title: –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ Nightscout
        entities:
          - entity: sensor.nightscout_server_status
            name: –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
            icon: mdi:server
          - entity: sensor.nightscout_data_freshness
            name: –°–≤–µ–∂–µ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
            icon: mdi:clock-check
          - entity: sensor.nightscout_database_size
            name: –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            icon: mdi:database

      - type: entities
        title: –°—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        entities:
          - entity: sensor.nightscout_loop_status
            name: –°—Ç–∞—Ç—É—Å Loop
            icon: mdi:sync
          - entity: sensor.nightscout_device_status
            name: –°—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
            icon: mdi:cellphone

      - type: history-graph
        title: –ó–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–π
        hours_to_show: 24
        entities:
          - entity: sensor.nightscout_phone_battery
            name: –¢–µ–ª–µ—Ñ–æ–Ω
          - entity: sensor.nightscout_pump_battery
            name: –ü–æ–º–ø–∞

      - type: history-graph
        title: –û—Å—Ç–∞—Ç–æ–∫ –∏–Ω—Å—É–ª–∏–Ω–∞
        hours_to_show: 24
        entities:
          - entity: sensor.nightscout_pump_reservoir
            name: –ò–Ω—Å—É–ª–∏–Ω –≤ –ø–æ–º–ø–µ

      - type: markdown
        content: |
          ## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ

          –≠—Ç–∞ –≤–∫–ª–∞–¥–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ä–≤–µ—Ä–µ Nightscout –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

          **–¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
          - üü¢ –ó–µ–ª—ë–Ω—ã–π: –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ
          - üü° –ñ—ë–ª—Ç—ã–π: –≤–Ω–∏–º–∞–Ω–∏–µ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞
          - üî¥ –ö—Ä–∞—Å–Ω—ã–π: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ

# ============================================================================
# –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –£–°–¢–ê–ù–û–í–ö–ï
# ============================================================================
# 
# 1. –í Home Assistant –æ—Ç–∫—Ä–æ–π—Ç–µ: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
# 2. –ù–∞–∂–º–∏—Ç–µ "+ –î–û–ë–ê–í–ò–¢–¨ –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø"
# 3. –í—ã–±–µ—Ä–∏—Ç–µ "–ù–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
# 4. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: "Nightscout Extended"
# 5. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ ‚Üí "–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
# 6. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ ‚Üí "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ YAML"
# 7. –£–¥–∞–ª–∏—Ç–µ –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º
# 8. –ù–∞–∂–º–∏—Ç–µ "–°–û–•–†–ê–ù–ò–¢–¨"
#
# –ü–†–ò–ú–ï–ß–ê–ù–ò–ï: –î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ HACS:
# - mini-graph-card (–¥–ª—è –∫—Ä–∞—Å–∏–≤—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤)
# - apexcharts-card (–¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–∏–∞–≥—Ä–∞–º–º)
# - mushroom cards (–¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ UI)
# - expander-card (–¥–ª—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)
