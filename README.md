# Nightscout Extended Integration –¥–ª—è Home Assistant

[![Version](https://img.shields.io/badge/version-2.3.0-blue.svg)](https://github.com/danudaru/HA_Nightscout)
[![Home Assistant](https://img.shields.io/badge/Home%20Assistant-2023.1+-blue.svg)](https://www.home-assistant.io/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Nightscout](https://img.shields.io/badge/Nightscout-14.x+-purple.svg)](https://nightscout.github.io/)

–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Nightscout –¥–ª—è Home Assistant, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –ø–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –æ –¥–∏–∞–±–µ—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã Nightscout / AndroidAPS —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π.

## üåü –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥–ª—é–∫–æ–∑—ã
- **Blood Glucose (BG)** - —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏ —Ç—Ä–µ–Ω–¥–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è: **mg/dL** –∏ **mmol/L**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ü–µ–ª–µ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 70-180 mg/dL / 3.9-10.0 mmol/L)

### üìà –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–¥–ª—è –ø–µ—Ä–∏–æ–¥–æ–≤: 24—á, 7–¥, 30–¥, 90–¥)
- **eA1c** - —Ä–∞—Å—á—ë—Ç–Ω—ã–π –≥–ª–∏–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–º–æ–≥–ª–æ–±–∏–Ω
- **Mean BG** - —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã
- **Median BG** - –º–µ–¥–∏–∞–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã
- **StdDev** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- **CV** - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏
- **GVI** - –∏–Ω–¥–µ–∫—Å –≥–ª–∏–∫–µ–º–∏—á–µ—Å–∫–æ–π –≤–∞—Ä–∏–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏
- **PGS** - –≥–ª–∏–∫–µ–º–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å –ø–∞—Ü–∏–µ–Ω—Ç–∞
- **TIR/TBR/TAR** - Time in/Below/Above Range
 - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑ –≤ 6 —á–∞—Å–æ–≤

### üíâ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Å—É–ª–∏–Ω–∞ –∏ —É–≥–ª–µ–≤–æ–¥–æ–≤
- **IOB** (Insulin on Board) - –∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω
- **COB** (Carbs on Board) - –∞–∫—Ç–∏–≤–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã
- **Sensitivity Ratio** - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ò—Å—Ç–æ—Ä–∏—è –±–æ–ª—é—Å–æ–≤ –∏ –ø—Ä–∏—ë–º–∞ —É–≥–ª–µ–≤–æ–¥–æ–≤

### üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ Nightscout (–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, DNS)
- –°–≤–µ–∂–µ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö —Ñ —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π (üü¢üü°üî¥)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–π (–ø–æ–º–ø–∞, —Ç–µ–ª–µ—Ñ–æ–Ω)
- –û—Å—Ç–∞—Ç–æ–∫ –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–µ

### üåê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DDNS
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **FreeDNS** –∏ **DuckDNS**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DNS –∑–∞–ø–∏—Å–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–º–µ–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏

### üìä –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á—ë—Ç–æ–≤
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ, –º–µ—Å—è—á–Ω—ã–µ)
- –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è –≥–ª—é–∫–æ–∑—ã
- –û—Ç—á—ë—Ç—ã –ø–æ –∏–Ω—Å—É–ª–∏–Ω—É –∏ —É–≥–ª–µ–≤–æ–¥–∞–º
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã

### üé® –ì–æ—Ç–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- 4 –≤–∫–ª–∞–¥–∫–∏: –û–±–∑–æ—Ä, –ì—Ä–∞—Ñ–∏–∫–∏, –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- –ü–æ–ª—É–∫—Ä—É–≥–ª—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã CV/GVI/PGS (apexcharts-card)
- –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫

## üíª –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Home Assistant 2023.1 –∏–ª–∏ –Ω–æ–≤–µ–µ
- Nightscout —Å–µ—Ä–≤–µ—Ä (–≤–µ—Ä—Å–∏—è 14.x –∏–ª–∏ –Ω–æ–≤–µ–µ)
- AndroidAPS –∏–ª–∏ –¥—Ä—É–≥–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–º–∫–Ω—É—Ç–æ–≥–æ —Ü–∏–∫–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è IOB/COB)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ HACS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ HACS ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. –ù–∞–∂–º–∏—Ç–µ ‚ãÆ ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
3. –î–æ–±–∞–≤—å—Ç–µ URL: `https://github.com/danudaru/HA_Nightscout`
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Home Assistant

#### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `custom_components/nightscout` –≤ `/config/custom_components/`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Home Assistant

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Å–ª—É–∂–±—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
2. –ù–∞–π–¥–∏—Ç–µ **Nightscout Extended**
3. –í–≤–µ–¥–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Nightscout —Å–µ—Ä–≤–µ—Ä–∞ –∏ API Key (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
4. –ì–æ—Ç–æ–≤–æ! –í—Å–µ —Å–µ–Ω—Å–æ—Ä—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [SETUP_GUIDE.md](SETUP_GUIDE.md)

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[SETUP_GUIDE.md](SETUP_GUIDE.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **[–ù–û–í–´–ï_–§–£–ù–ö–¶–ò–ò.md](–ù–û–í–´–ï_–§–£–ù–ö–¶–ò–ò.md)** - –û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –≤–µ—Ä—Å–∏–∏ 2.0
- **[CHANGELOG.md](CHANGELOG.md)** - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **[API_REFERENCE.md](API_REFERENCE.md)** - –°–ø—Ä–∞–≤–∫–∞ –ø–æ Nightscout API

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
custom_components/nightscout/
‚îú‚îÄ‚îÄ __init__.py              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ api.py                   # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è Nightscout
‚îú‚îÄ‚îÄ config_flow.py           # UI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ const.py                 # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ defaults.py              # –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ diagnostics.py           # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DDNS
‚îú‚îÄ‚îÄ manifest.json            # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ reports.py               # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
‚îú‚îÄ‚îÄ sensor.py                # –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã
‚îú‚îÄ‚îÄ sensor_diagnostics.py    # –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–Ω—Å–æ—Ä—ã
‚îú‚îÄ‚îÄ sensor_statistics.py     # –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–Ω—Å–æ—Ä—ã
‚îú‚îÄ‚îÄ statistics.py            # –†–∞—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îú‚îÄ‚îÄ strings.json             # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (EN)
‚îú‚îÄ‚îÄ utils.py                 # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îî‚îÄ‚îÄ translations/
    ‚îú‚îÄ‚îÄ en.json              # –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ ru.json              # –†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã
- `sensor.blood_glucose` - –¢–µ–∫—É—â–∞—è –≥–ª—é–∫–æ–∑–∞
- `sensor.nightscout_insulin_on_board` - IOB
- `sensor.nightscout_carbs_on_board` - COB  
- `sensor.nightscout_sensitivity_ratio` - –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–µ–Ω—Å–æ—Ä—ã eA1c
- `sensor.nightscout_ea1c_24h` / `_7d` / `_30d` / `_90d`

### –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–Ω—Å–æ—Ä—ã (–∑–∞ –∫–∞–∂–¥—ã–π –ø–µ—Ä–∏–æ–¥)
- `sensor.mean_bg_[–ø–µ—Ä–∏–æ–¥]` - –°—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞
- `sensor.median_bg_[–ø–µ—Ä–∏–æ–¥]` - –ú–µ–¥–∏–∞–Ω–Ω–∞—è –≥–ª—é–∫–æ–∑–∞
- `sensor.stddev_[–ø–µ—Ä–∏–æ–¥]` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- `sensor.cv_[–ø–µ—Ä–∏–æ–¥]` - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏
- `sensor.gvi_[–ø–µ—Ä–∏–æ–¥]` - –ò–Ω–¥–µ–∫—Å –≤–∞—Ä–∏–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏
- `sensor.pgs_[–ø–µ—Ä–∏–æ–¥]` - –ì–ª–∏–∫–µ–º–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å
- `sensor.time_in_range_[–ø–µ—Ä–∏–æ–¥]` - Time in Range
- `sensor.time_below_range_[–ø–µ—Ä–∏–æ–¥]` - Time Below Range
- `sensor.time_above_range_[–ø–µ—Ä–∏–æ–¥]` - Time Above Range

–ü–µ—Ä–∏–æ–¥—ã: `24h`, `7d`, `30d`, `90d`

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–Ω—Å–æ—Ä—ã
- `sensor.nightscout_server_status` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
- `sensor.nightscout_data_freshness` - –°–≤–µ–∂–µ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- `sensor.nightscout_database_size` - –†–∞–∑–º–µ—Ä –ë–î
- `sensor.nightscout_pump_reservoir` - –û—Å—Ç–∞—Ç–æ–∫ –∏–Ω—Å—É–ª–∏–Ω–∞
- `sensor.nightscout_pump_battery` - –ó–∞—Ä—è–¥ –ø–æ–º–ø—ã
- `sensor.nightscout_phone_battery` - –ó–∞—Ä—è–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: **99+ —Å–µ–Ω—Å–æ—Ä–æ–≤**

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Å–ª—É–∂–±—ã** ‚Üí **Nightscout Extended** ‚Üí **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å**

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- **–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –≥–ª—é–∫–æ–∑—ã**: mg/dL –∏–ª–∏ mmol/L
- **–¶–µ–ª–µ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω**: –º–∏–Ω/–º–∞–∫—Å –∑–Ω–∞—á–µ–Ω–∏—è
- **DDNS**: –≤–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ FreeDNS/DuckDNS
- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–º–µ–Ω–∞**: –¥–∞—Ç–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üé® –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≥–æ—Ç–æ–≤—É—é –ø–∞–Ω–µ–ª—å –∏–∑ `nightscout_dashboard_extended.yaml`:

### –í–∫–ª–∞–¥–∫–∞ 1: –û–±–∑–æ—Ä
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–µ–∫—É—â–µ–π –≥–ª—é–∫–æ–∑—ã
- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (eA1c, IOB, COB)
- –°—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- Time in Range –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –ø–æ–ª—É–∫—Ä—É–≥–ª—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã CV/GVI/PGS

### –í–∫–ª–∞–¥–∫–∞ 2: –ì—Ä–∞—Ñ–∏–∫–∏
- –ì—Ä–∞—Ñ–∏–∫ –≥–ª—é–∫–æ–∑—ã (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–µ—Ä–∏–æ–¥)
- IOB, COB, Sensitivity
- –ë–∞–∑–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
- –ò—Å—Ç–æ—Ä–∏—è –ª–µ—á–µ–Ω–∏—è

### –í–∫–ª–∞–¥–∫–∞ 3: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –†–∞–∑–¥–µ–ª—ã –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º
- –í—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è

### –í–∫–ª–∞–¥–∫–∞ 4: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –¥–∞–Ω–Ω—ã—Ö
- –ì—Ä–∞—Ñ–∏–∫–∏ –±–∞—Ç–∞—Ä–µ–π
- –û—Å—Ç–∞—Ç–æ–∫ –∏–Ω—Å—É–ª–∏–Ω–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ

## üìà –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

–í—Å–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π:

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | üü¢ –ù–æ—Ä–º–∞ | üü° –í–Ω–∏–º–∞–Ω–∏–µ | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
|-----------|---------|-----------|-----------|
| eA1c | < 7.0% | 7.0-8.0% | > 8.0% |
| TIR | > 70% | 50-70% | < 30% |
| TBR | < 4% | 4-10% | > 10% |
| TAR | < 25% | 25-50% | > 50% |
| CV | < 36% | 36-50% | > 50% |

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [defaults.py](custom_components/nightscout/defaults.py)

## üîß –ü—Ä–∏–º–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–æ–π –≥–ª—é–∫–æ–∑–µ

```yaml
automation:
  - alias: "Nightscout: –ù–∏–∑–∫–∞—è –≥–ª—é–∫–æ–∑–∞"
    trigger:
      - platform: numeric_state
        entity_id: sensor.blood_glucose
        below: 70
    action:
      - service: notify.mobile_app
        data:
          title: "‚ö†Ô∏è –ù–∏–∑–∫–∞—è –≥–ª—é–∫–æ–∑–∞!"
          message: "–ì–ª—é–∫–æ–∑–∞: {{ states('sensor.blood_glucose') }} mg/dL"
          data:
            priority: high
```

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–º–µ–Ω–µ –∏–Ω—Å—É–ª–∏–Ω–∞

```yaml
automation:
  - alias: "Nightscout: –ú–∞–ª–æ –∏–Ω—Å—É–ª–∏–Ω–∞"
    trigger:
      - platform: numeric_state
        entity_id: sensor.nightscout_pump_reservoir
        below: 20
    action:
      - service: notify.mobile_app
        data:
          title: "üíâ –ú–∞–ª–æ –∏–Ω—Å—É–ª–∏–Ω–∞"
          message: "–û—Å—Ç–∞–ª–æ—Å—å {{ states('sensor.nightscout_pump_reservoir') }} U"
```

## üÜï –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v2.0

### –î–æ–±–∞–≤–ª–µ–Ω–æ
- ‚ú® 36 –Ω–æ–≤—ã—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤ (Mean, Median, StdDev, CV, GVI, PGS, TIR/TBR/TAR)
- üîß 3 –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–Ω—Å–æ—Ä–∞ (Server Status, Data Freshness, Database Size)
- üåê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DDNS (FreeDNS, DuckDNS)
- üìä –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤
- üéØ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ü–µ–ª–µ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
- üåç –ü–æ–¥–¥–µ—Ä–∂–∫–∞ mmol/L
- üé® –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (4 –≤–∫–ª–∞–¥–∫–∏)
- üìñ –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π

### –ò–∑–º–µ–Ω–µ–Ω–æ
- ‚ö†Ô∏è **BREAKING**: `sensor.blood_sugar` ‚Üí `sensor.blood_glucose`
- ‚ö° –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ (–≤–º–µ—Å—Ç–æ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
- üîê –£–ª—É—á—à–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: [CHANGELOG.md](CHANGELOG.md)

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞ (https://)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API Key (–µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞—â–∏—â—ë–Ω)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö IOB/COB
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ AndroidAPS/Loop –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ devicestatus: `https://your-url/api/v1/devicestatus`

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
- –î–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ HA

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [SETUP_GUIDE.md - –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](SETUP_GUIDE.md#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç! 

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE)

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [Nightscout Project](https://nightscout.github.io/)
- [Home Assistant Community](https://www.home-assistant.io/)
- [AndroidAPS](https://androidaps.readthedocs.io/)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üêõ [Issues –Ω–∞ GitHub](https://github.com/danudaru/HA_Nightscout/issues)
- üí¨ [–û–±—Å—É–∂–¥–µ–Ω–∏—è](https://github.com/danudaru/HA_Nightscout/discussions)
- üìß Email: [your-email@example.com]

---

**‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–µ–∑–µ–Ω, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤—ë–∑–¥–æ—á–∫—É –Ω–∞ GitHub!**

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Nightscout](https://nightscout.github.io/)
- [AndroidAPS](https://androidaps.readthedocs.io/)
- [Home Assistant](https://www.home-assistant.io/)
- [HACS](https://hacs.xyz/)

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–Ω—Å–æ—Ä—ã:

| Entity ID | –û–ø–∏—Å–∞–Ω–∏–µ | –ï–¥–∏–Ω–∏—Ü—ã |
|-----------|----------|---------|
| `sensor.blood_glucose` | –£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã | –º–≥/–¥–ª –∏–ª–∏ –º–º–æ–ª—å/–ª |
| `sensor.nightscout_insulin_on_board` | –ê–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω (IOB) | U |
| `sensor.nightscout_carbs_on_board` | –ê–∫—Ç–∏–≤–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã (COB) | –≥ |
| `sensor.nightscout_sensitivity_ratio` | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | - |
| `sensor.nightscout_ea1c_24h` | eA1c –∑–∞ 24 —á–∞—Å–∞ | % |
| `sensor.nightscout_ea1c_7d` | eA1c –∑–∞ 7 –¥–Ω–µ–π | % |
| `sensor.nightscout_ea1c_30d` | eA1c –∑–∞ 30 –¥–Ω–µ–π | % |
| `sensor.nightscout_ea1c_90d` | eA1c –∑–∞ 90 –¥–Ω–µ–π | % |
| `sensor.nightscout_pump_reservoir` | –ò–Ω—Å—É–ª–∏–Ω –≤ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–µ | U |
| `sensor.nightscout_pump_battery` | –ë–∞—Ç–∞—Ä–µ—è –ø–æ–º–ø—ã | % |
| `sensor.nightscout_phone_battery` | –ë–∞—Ç–∞—Ä–µ—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ | % |
| `sensor.nightscout_basal_rate` | –ë–∞–∑–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å | U/—á |
| `sensor.nightscout_temp_basal` | –í—Ä–µ–º–µ–Ω–Ω—ã–π –±–∞–∑–∞–ª | U/—á |
| `sensor.nightscout_last_treatment` | –ü–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ | - |
| `sensor.nightscout_last_bolus` | –ü–æ—Å–ª–µ–¥–Ω–∏–π –±–æ–ª—é—Å | U |
| `sensor.nightscout_last_carbs` | –ü–æ—Å–ª–µ–¥–Ω–∏–µ —É–≥–ª–µ–≤–æ–¥—ã | –≥ |
| `sensor.nightscout_loop_status` | –°—Ç–∞—Ç—É—Å –ø–µ—Ç–ª–∏ | - |
| `sensor.nightscout_device_status` | –°—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ | - |

–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–Ω—Å–æ—Ä—ã (–∑–∞ –∫–∞–∂–¥—ã–π –ø–µ—Ä–∏–æ–¥: `24h`, `7d`, `30d`, `90d`):
- `sensor.mean_bg_[–ø–µ—Ä–∏–æ–¥]`
- `sensor.median_bg_[–ø–µ—Ä–∏–æ–¥]`
- `sensor.stddev_[–ø–µ—Ä–∏–æ–¥]`
- `sensor.cv_[–ø–µ—Ä–∏–æ–¥]`
- `sensor.gvi_[–ø–µ—Ä–∏–æ–¥]`
- `sensor.pgs_[–ø–µ—Ä–∏–æ–¥]`
- `sensor.time_in_range_[–ø–µ—Ä–∏–æ–¥]`
- `sensor.time_below_range_[–ø–µ—Ä–∏–æ–¥]`
- `sensor.time_above_range_[–ø–µ—Ä–∏–æ–¥]`

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä 1: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–æ–π –≥–ª—é–∫–æ–∑–µ

```yaml
automation:
  - alias: "–ù–∏–∑–∫–∞—è –≥–ª—é–∫–æ–∑–∞"
    trigger:
      - platform: numeric_state
        entity_id: sensor.blood_glucose
        below: 70
    action:
      - service: notify.mobile_app
        data:
          title: "‚ö†Ô∏è –ù–∏–∑–∫–∞—è –≥–ª—é–∫–æ–∑–∞!"
          message: "–£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã: {{ states('sensor.blood_glucose') }} –º–≥/–¥–ª"
          data:
            priority: high
            ttl: 0
```

### –ü—Ä–∏–º–µ—Ä 2: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ –ø–æ–º–ø–µ

```yaml
automation:
  - alias: "–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞"
    trigger:
      - platform: numeric_state
        entity_id: sensor.nightscout_pump_reservoir
        below: 20
    action:
      - service: notify.mobile_app
        data:
          title: "üíâ –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞"
          message: "–û—Å—Ç–∞–ª–æ—Å—å {{ states('sensor.nightscout_pump_reservoir') }} U"
```

### –ü—Ä–∏–º–µ—Ä 3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—ã—Å–æ–∫–æ–º eA1c

```yaml
automation:
  - alias: "–í—ã—Å–æ–∫–∏–π eA1c –∑–∞ –Ω–µ–¥–µ–ª—é"
    trigger:
      - platform: numeric_state
        entity_id: sensor.nightscout_ea1c_7d
        above: 7.0
    action:
      - service: notify.mobile_app
        data:
          title: "üìä –í—ã—Å–æ–∫–∏–π eA1c"
          message: "eA1c –∑–∞ 7 –¥–Ω–µ–π: {{ states('sensor.nightscout_ea1c_7d') }}%"
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –°–µ–Ω—Å–æ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (Unavailable)

**IOB, COB, Sensitivity –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ AndroidAPS –∏–ª–∏ –≤–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–º–∫–Ω—É—Ç–æ–≥–æ —Ü–∏–∫–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Nightscout
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Nightscout –≤–∫–ª—é—á–µ–Ω –ø–ª–∞–≥–∏–Ω `openaps` –∏–ª–∏ `loop`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Nightscout API: `https://your-nightscout-url/api/v1/devicestatus.json`

**eA1c —Å–µ–Ω—Å–æ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã:**
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –º–∏–Ω–∏–º—É–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –≥–ª—é–∫–æ–∑—ã –∑–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –ø–µ—Ä–∏–æ–¥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–ø–∏—Å–∏ –≥–ª—é–∫–æ–∑—ã –ø–æ—Å—Ç—É–ø–∞—é—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–Ω—Å–æ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∞ –ø–æ–º–ø–∞ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ Nightscout
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤ `/api/v1/devicestatus.json`

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `https://` –∏–ª–∏ `http://`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞—â–∏—â–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä Nightscout –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –≤–∞—à–µ–π —Å–µ—Ç–∏ Home Assistant

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```yaml
# configuration.yaml
logger:
  default: info
  logs:
    custom_components.nightscout: debug
    py_nightscout: debug
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
nightscout/
‚îú‚îÄ‚îÄ __init__.py          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ api.py               # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ config_flow.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ UI
‚îú‚îÄ‚îÄ const.py             # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ manifest.json        # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ sensor.py            # –°–µ–Ω—Å–æ—Ä—ã
‚îú‚îÄ‚îÄ strings.json         # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ utils.py             # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoints

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ Nightscout API endpoints:

- `/api/v1/entries.json` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≥–ª—é–∫–æ–∑—ã
- `/api/v1/devicestatus.json` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (IOB, COB, –ø–æ–º–ø–∞, –±–∞—Ç–∞—Ä–µ–∏)
- `/api/v1/status.json` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

### –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

- –ì–ª—é–∫–æ–∑–∞, IOB, COB, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –∫–∞–∂–¥—É—é **1 –º–∏–Ω—É—Ç—É**
- eA1c —Å–µ–Ω—Å–æ—Ä—ã: –∫–∞–∂–¥—É—é **1 –º–∏–Ω—É—Ç—É** (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Nightscout)

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ eA1c

```
eA1c (%) = 3.31 + 0.02392 √ó [—Å—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞ –≤ –º–≥/–¥–ª]
```

–≠—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ GMI (Glucose Management Indicator) –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –æ—à–∏–±–∫—É –∏–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ [Issues](https://github.com/danudaru/HA_Nightscout/issues)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ

### –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:
1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/AmazingFeature`)
3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. –ó–∞–ø—É—à—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π AGPL-3.0, –∫–∞–∫ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Home Assistant Nightscout.

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Nightscout –æ—Ç [@marciogranzotto](https://github.com/marciogranzotto)
- [Nightscout Project](https://nightscout.github.io/)
- [AndroidAPS](https://androidaps.readthedocs.io/)
- –°–æ–æ–±—â–µ—Å—Ç–≤–æ Home Assistant

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

- [Nightscout](https://nightscout.github.io/) - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–ª—é–∫–æ–∑—ã –≤ –æ–±–ª–∞–∫–µ
- [AndroidAPS](https://androidaps.readthedocs.io/) - –°–∏—Å—Ç–µ–º–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–π –ø–æ–¥–∂–µ–ª—É–¥–æ—á–Ω–æ–π –∂–µ–ª–µ–∑—ã –¥–ª—è Android
- [py-nightscout](https://github.com/ps-jay/py-nightscout) - Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Nightscout API

---

**–î–∏—Å–∫–ª–µ–π–º–µ—Ä**: –≠—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Home Assistant –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π –±–µ–∑ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –≤—Ä–∞—á–æ–º. –í—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å –ø–æ–∫–∞–∑–∞–Ω–∏—è–º–∏ –≤–∞—à–µ–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–ª—é–∫–æ–∑—ã.
