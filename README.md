# Nightscout Extended Integration –¥–ª—è Home Assistant

–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Nightscout –¥–ª—è Home Assistant, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –ø–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –æ –¥–∏–∞–±–µ—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã Nightscout / AndroidAPS.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã

- **–£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã –∫—Ä–æ–≤–∏ (Blood Glucose)** - —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≥–ª—é–∫–æ–∑—ã –≤ –º–≥/–¥–ª —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏ —Ç—Ä–µ–Ω–¥–∞
- **–ê–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω (IOB - Insulin on Board)** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ –æ—Ä–≥–∞–Ω–∏–∑–º–µ
- **–ê–∫—Ç–∏–≤–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã (COB - Carbs on Board)** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É–≥–ª–µ–≤–æ–¥–æ–≤
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Sensitivity Ratio)** - —Ç–µ–∫—É—â–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –∏–Ω—Å—É–ª–∏–Ω—É, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è AAPS

### –†–∞—Å—á–µ—Ç–Ω—ã–π –≥–ª–∏–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–º–æ–≥–ª–æ–±–∏–Ω (eA1c)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç estimated A1c (eA1c) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ä–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≥–ª—é–∫–æ–∑—ã –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã:
- **eA1c (24 —á–∞—Å–∞)** - –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏
- **eA1c (7 –¥–Ω–µ–π)** - –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
- **eA1c (30 –¥–Ω–µ–π)** - –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
- **eA1c (90 –¥–Ω–µ–π)** - –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞

–†–∞—Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–æ—Ä–º—É–ª—É GMI (Glucose Management Indicator): `GMI(%) = 3.31 + 0.02392 √ó [—Å—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞ –≤ –º–≥/–¥–ª]`

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–Ω—Å–æ—Ä—ã

- **–£—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–µ –ø–æ–º–ø—ã** - –æ—Å—Ç–∞—Ç–æ–∫ –≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö (U)
- **–ó–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏ –ø–æ–º–ø—ã** - –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞—Ä—è–¥–∞
- **–ó–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞** - –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞—Ä—è–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –ø–æ–º–ø–æ–π

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Home Assistant 2023.1 –∏–ª–∏ –Ω–æ–≤–µ–µ
- Nightscout —Å–µ—Ä–≤–µ—Ä (–≤–µ—Ä—Å–∏—è 14.x –∏–ª–∏ –Ω–æ–≤–µ–µ)
- AndroidAPS –∏–ª–∏ –¥—Ä—É–≥–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–º–∫–Ω—É—Ç–æ–≥–æ —Ü–∏–∫–ª–∞, –ø–µ—Ä–µ–¥–∞—é—â–∞—è –¥–∞–Ω–Ω—ã–µ –≤ Nightscout (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è IOB/COB)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `nightscout` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `custom_components` –≤–∞—à–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Home Assistant:
   ```
   <config_directory>/custom_components/nightscout/
   ```

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Home Assistant

3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Å–ª—É–∂–±—ã** ‚Üí **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é**

4. –ù–∞–π–¥–∏—Ç–µ "Nightscout Extended" –∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ—ë

5. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
   - **URL**: –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ Nightscout —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://mynightscout.herokuapp.com`)
   - **API Key** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –∑–∞—â–∏—â–µ–Ω (–∫–æ–≥–¥–∞ `auth_default_roles != readable`)

6. –ù–∞–∂–º–∏—Ç–µ **–û—Ç–ø—Ä–∞–≤–∏—Ç—å**

### –í–∞—Ä–∏–∞–Ω—Ç 2: HACS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ HACS –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ HACS
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ –≤ –≤–µ—Ä—Ö–Ω–µ–º –ø—Ä–∞–≤–æ–º —É–≥–ª—É
4. –í—ã–±–µ—Ä–∏—Ç–µ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏"
5. –î–æ–±–∞–≤—å—Ç–µ URL —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
7. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Home Assistant
8. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ UI (—Å–º. —à–∞–≥–∏ 3-6 –≤—ã—à–µ)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Dashboard

–í –ø—Ä–æ–µ–∫—Ç–µ –≤–∫–ª—é—á–µ–Ω –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (`nightscout_dashboard.yaml`). 

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–Ω–µ–ª–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `nightscout_dashboard.yaml`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
3. –í Home Assistant –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–û–±–∑–æ—Ä** ‚Üí **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
4. –ù–∞–∂–º–∏—Ç–µ **+ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É**
5. –í—ã–±–µ—Ä–∏—Ç–µ **–í—Ä—É—á–Ω—É—é**
6. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π YAML –∫–æ–¥
7. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –ø–∞–Ω–µ–ª—å:

- üìä Gauge-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è –≥–ª—é–∫–æ–∑—ã —Å —Ü–≤–µ—Ç–æ–≤—ã–º–∏ –∑–æ–Ω–∞–º–∏
- üìã –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- üìà –ì—Ä–∞—Ñ–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏ –≥–ª—é–∫–æ–∑—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —á–∞—Å–æ–≤
- üíâ –ì—Ä–∞—Ñ–∏–∫–∏ IOB –∏ COB
- üîã –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ä–µ–∑–µ—Ä–≤—É–∞—Ä, –±–∞—Ç–∞—Ä–µ–∏)
- üìâ –¢—Ä–µ–Ω–¥ eA1c –ø–æ —Ä–∞–∑–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º
- üëÅÔ∏è –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–±–∑–æ—Ä–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ t—Ä–µ–Ω–¥–∞ eA1c —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ [mini-graph-card](https://github.com/kalkih/mini-graph-card):
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ HACS
HACS ‚Üí Frontend ‚Üí mini-graph-card
```

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–Ω—Å–æ—Ä—ã:

| Entity ID | –û–ø–∏—Å–∞–Ω–∏–µ | –ï–¥–∏–Ω–∏—Ü—ã |
|-----------|----------|---------|
| `sensor.blood_sugar` | –£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã | –º–≥/–¥–ª |
| `sensor.nightscout_insulin_on_board` | –ê–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω (IOB) | U |
| `sensor.nightscout_carbs_on_board` | –ê–∫—Ç–∏–≤–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã (COB) | –≥ |
| `sensor.nightscout_sensitivity_ratio` | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | - |
| `sensor.nightscout_ea1c_24h` | eA1c –∑–∞ 24 —á–∞—Å–∞ | % |
| `sensor.nightscout_ea1c_7d` | eA1c –∑–∞ 7 –¥–Ω–µ–π | % |
| `sensor.nightscout_ea1c_30d` | eA1c –∑–∞ 30 –¥–Ω–µ–π | % |
| `sensor.nightscout_ea1c_90d` | eA1c –∑–∞ 90 –¥–Ω–µ–π | % |
| `sensor.nightscout_pump_reservoir` | –ò–Ω—Å—É–ª–∏–Ω –≤ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–µ | U |
| `sensor.nightscout_pump_battery` | –ë–∞—Ç–∞—Ä–µ—è –ø–æ–º–ø—ã | % |
| `sensor.nightscout_phone_battery` | –ë–∞—Ç–∞—Ä–µ—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ | % |

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä 1: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–æ–π –≥–ª—é–∫–æ–∑–µ

```yaml
automation:
  - alias: "–ù–∏–∑–∫–∞—è –≥–ª—é–∫–æ–∑–∞"
    trigger:
      - platform: numeric_state
        entity_id: sensor.blood_sugar
        below: 70
    action:
      - service: notify.mobile_app
        data:
          title: "‚ö†Ô∏è –ù–∏–∑–∫–∞—è –≥–ª—é–∫–æ–∑–∞!"
          message: "–£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã: {{ states('sensor.blood_sugar') }} –º–≥/–¥–ª"
          data:
            priority: high
            ttl: 0
```

### –ü—Ä–∏–º–µ—Ä 2: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ –ø–æ–º–ø–µ

```yaml
automation:
  - alias: "–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞"
    trigger:
      - platform: numeric_state
        entity_id: sensor.nightscout_pump_reservoir
        below: 20
    action:
      - service: notify.mobile_app
        data:
          title: "üíâ –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞"
          message: "–û—Å—Ç–∞–ª–æ—Å—å {{ states('sensor.nightscout_pump_reservoir') }} U"
```

### –ü—Ä–∏–º–µ—Ä 3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—ã—Å–æ–∫–æ–º eA1c

```yaml
automation:
  - alias: "–í—ã—Å–æ–∫–∏–π eA1c –∑–∞ –Ω–µ–¥–µ–ª—é"
    trigger:
      - platform: numeric_state
        entity_id: sensor.nightscout_ea1c_7d
        above: 7.0
    action:
      - service: notify.mobile_app
        data:
          title: "üìä –í—ã—Å–æ–∫–∏–π eA1c"
          message: "eA1c –∑–∞ 7 –¥–Ω–µ–π: {{ states('sensor.nightscout_ea1c_7d') }}%"
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –°–µ–Ω—Å–æ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (Unavailable)

**IOB, COB, Sensitivity –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ AndroidAPS –∏–ª–∏ –≤–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–º–∫–Ω—É—Ç–æ–≥–æ —Ü–∏–∫–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Nightscout
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Nightscout –≤–∫–ª—é—á–µ–Ω –ø–ª–∞–≥–∏–Ω `openaps` –∏–ª–∏ `loop`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Nightscout API: `https://your-nightscout-url/api/v1/devicestatus.json`

**eA1c —Å–µ–Ω—Å–æ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã:**
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –º–∏–Ω–∏–º—É–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –≥–ª—é–∫–æ–∑—ã –∑–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –ø–µ—Ä–∏–æ–¥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–ø–∏—Å–∏ –≥–ª—é–∫–æ–∑—ã –ø–æ—Å—Ç—É–ø–∞—é—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–Ω—Å–æ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∞ –ø–æ–º–ø–∞ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ Nightscout
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤ `/api/v1/devicestatus.json`

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `https://` –∏–ª–∏ `http://`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞—â–∏—â–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä Nightscout –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –≤–∞—à–µ–π —Å–µ—Ç–∏ Home Assistant

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```yaml
# configuration.yaml
logger:
  default: info
  logs:
    custom_components.nightscout: debug
    py_nightscout: debug
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
nightscout/
‚îú‚îÄ‚îÄ __init__.py          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ api.py               # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ config_flow.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ UI
‚îú‚îÄ‚îÄ const.py             # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ manifest.json        # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ sensor.py            # –°–µ–Ω—Å–æ—Ä—ã
‚îú‚îÄ‚îÄ strings.json         # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ utils.py             # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoints

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ Nightscout API endpoints:

- `/api/v1/entries.json` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≥–ª—é–∫–æ–∑—ã
- `/api/v1/devicestatus.json` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (IOB, COB, –ø–æ–º–ø–∞, –±–∞—Ç–∞—Ä–µ–∏)
- `/api/v1/status.json` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

### –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

- –ì–ª—é–∫–æ–∑–∞, IOB, COB, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –∫–∞–∂–¥—É—é **1 –º–∏–Ω—É—Ç—É**
- eA1c —Å–µ–Ω—Å–æ—Ä—ã: –∫–∞–∂–¥—É—é **1 –º–∏–Ω—É—Ç—É** (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Nightscout)

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ eA1c

```
eA1c (%) = 3.31 + 0.02392 √ó [—Å—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞ –≤ –º–≥/–¥–ª]
```

–≠—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ GMI (Glucose Management Indicator) –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –æ—à–∏–±–∫—É –∏–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ [Issues](https://github.com/yourusername/HA_Nightscout/issues)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ

### –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:
1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/AmazingFeature`)
3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. –ó–∞–ø—É—à—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π AGPL-3.0, –∫–∞–∫ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Home Assistant Nightscout.

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Nightscout –æ—Ç [@marciogranzotto](https://github.com/marciogranzotto)
- [Nightscout Project](https://nightscout.github.io/)
- [AndroidAPS](https://androidaps.readthedocs.io/)
- –°–æ–æ–±—â–µ—Å—Ç–≤–æ Home Assistant

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

- [Nightscout](https://nightscout.github.io/) - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–ª—é–∫–æ–∑—ã –≤ –æ–±–ª–∞–∫–µ
- [AndroidAPS](https://androidaps.readthedocs.io/) - –°–∏—Å—Ç–µ–º–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–π –ø–æ–¥–∂–µ–ª—É–¥–æ—á–Ω–æ–π –∂–µ–ª–µ–∑—ã –¥–ª—è Android
- [py-nightscout](https://github.com/ps-jay/py-nightscout) - Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Nightscout API

---

**–î–∏—Å–∫–ª–µ–π–º–µ—Ä**: –≠—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Home Assistant –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π –±–µ–∑ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –≤—Ä–∞—á–æ–º. –í—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å –ø–æ–∫–∞–∑–∞–Ω–∏—è–º–∏ –≤–∞—à–µ–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–ª—é–∫–æ–∑—ã.
